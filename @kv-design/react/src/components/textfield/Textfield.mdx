import { Meta, Canvas, Controls, Primary } from '@storybook/addon-docs/blocks';
import * as TextfieldStories from './Textfield.stories';

<Meta of={TextfieldStories} />

# Textfield

`Textfield` gir brukere muligheten til å skrive fritekst eller tall.

`Textfield` har innebygget `label`, `description`, `validationmessage`, `affix` og `counter`. Trenger du full kontroll over komponentenes oppsett bruker du heller [`Input`](/docs/components-input--docs) eller [`Textarea`](/docs/components-textarea--docs) direkte.

OBS: Ikke legg `Field` rundt `Textfield`, siden den allerede benytter `Field`-komponenten.

<Primary />

**Bruk `Textfield` når**

- feltet inngår i et komplett skjemafelt med label, beskrivelse og valideringsmelding
- feltet skal valideres underveis eller ved innsending
- brukeren kan skrive inn en unik verdi som ikke kan velges fra en liste


**Unngå `Textfield` når**

- du kun trenger et enkelt input-felt uten skjemalogikk - bruk heller [`Input`](/docs/components-input--docs)
- brukeren skal velge fra et begrenset sett med alternativer - bruk heller [`Radio`](/docs/components-radio--docs), [`Checkbox`](/docs/components-checkbox--docs) eller [`Select`](/docs/components-select--docs)

## Varianter med eksempler

### Multiline

Sett `multiline` til `true` for å endre `Textfield` til et textarea. Dette egner seg for lengre svar.

<Canvas of={TextfieldStories.Multiline} />

### Med prefiks og suffiks

Prefiks og suffiks brukes til å vise enheter, valuta eller annen relevant informasjon. De skal ikke brukes uten `label`, fordi skjermlesere ikke leser dem opp. Informasjonen som vises som prefiks eller suffiks må også inkluderes i `label`.

<Canvas of={TextfieldStories.Affix} />

### Med teller

Bruk `counter` til å informere om antall tegn brukerne kan skrive i feltet.

<Canvas of={TextfieldStories.Counter} />
 
### Påkrevde og valgfrie felt

Påkrevde felt må merkes tydelig, siden dette er lovpålagt. Når du plasserer en `Tag` i `label`, anbefaler vi `margin-inline-start: var(--ds-size-2)` for god avstand mellom tekst og tag.

<Canvas of={TextfieldStories.Required} />

## Retningslinjer

### Velg riktig felt

- [`Input`](/docs/components-input--docs) for korte svar
- [`Textarea`](/docs/components-textarea--docs) for lengre og mer utfyllende tekst

### Unngå placeholder-tekst

`Placeholder`-tekst forsvinner når brukeren begynner å skrive, og kan derfor ikke brukes som erstatning for viktig informasjon. Kontrastkravene gjør også at `placeholder`-tekst kan se ut som at feltet allerede er utfylt. Legg heller hint og veiledning i `label` eller hjelpetekst.

### Tilpass bredden

Tilpass bredden etter innholdet: smalere for telefonnumre, bredere for stedsnavn. Variert bredde gjør skjemaer lettere å navigere.

### Tillat kopier og lim inn

Brukere må kunne kopiere og lime inn tekst i feltet. Dette er viktig for effektiv utfylling og skal ikke deaktiveres.

### Inndata og formatering

#### Kombiner riktig input-type og autocomplete

For god tilgjengelighet bør du bruke en hensiktsmessig kombinasjon av input-type og autocomplete. Tillat ulike måter å skrive inn data på, så lenge verdien er entydig (for eksempel mellomrom i telefonnummer eller punktum i personnummer).

Automatisk formatering skal være synlig, men må ikke forstyrre brukeren.

#### Formål med inndata

Bruk autocomplete når feltet samsvarer med en forhåndsdefinert kategori i [1.3.5 formål med inndata (uutilsynet.no)](https://www.uutilsynet.no/wcag-standarden/135-identifiser-formal-med-inndata-niva-aa/142). Dette gjør det enklere for nettlesere og hjelpemidler å foreslå personopplysninger automatisk.

Hvis feltet gjelder en annen person enn brukeren, sett `autocomplete='off'`. Dersom alle felter skal ha dette, kan det settes på det overordnede `<form>`-elementet.

#### Input-type

Velg input-type som samsvarer med informasjonen du ber om, for eksempel tel, search eller email. Unngå `type='number'` med mindre du har klare brukerbehov som tilsier det. 

`type='number'` kan
- fjerne innledende nuller
- endre verdi ved scrolling
- være utfordrende for skjermlesere
- runde av lange tall

Bruk heller `type='text'` med `inputmode='numeric'`.

#### Unngå Disabled

Vi unngår deaktivert (disabled) `Textfield` fordi de kan være vanskelige å oppfatte. Noen brukere vil ikke forstå hvorfor den ikke er klikkbar. Hvis et `Textfield` ikke er relevant, bør du helst fjerne det fremfor å deaktivere det. Tilby gjerne brukeren informasjon om hvorfor noe ikke er tilgjengelig.

Nav har en god forklaring på [hvorfor deaktiverte tilstander er problematisk](https://aksel.nav.no/god-praksis/artikler/deaktiverte-tilstander) og hvilke alternativer som finnes.

#### Unngå ReadOnly

`Textfield` støtter `readOnly`-attributtet for å gjøre feltet skrivebeskyttet, og gir en visuell indikasjon som skiller seg fra redigerbare felter. Vi unngår likevel `readOnly` så langt det lar seg gjøre, fordi slike felter kan være forvirrende for noen brukere.

## Tekst til Textfield

- Alle `Textfield` skal ha en `label`
- Hold labelen kort, og unngå at den går over to linjer
- Ikke legg til unødvendig tekst i `label` eller beskrivelse
- Unngå kolon etter `label`

## Kilde

Løsningen bygger på etablerte prinsipper fra Digdirs og Udirs designsystem. Kartverket viderefører disse med fokus på tydelig struktur, tilgjengelighet og enkel navigasjon.